// Generated by CoffeeScript 1.4.0
(function() {
  var ViewModel;

  ViewModel = (function() {

    function ViewModel() {
      var _this = this;
      this.socket = null;
      this.connected = ko.observable(false);
      this.Display = ko.observable($("#hdnStartVal").val());
      this.btnSetVal_Click = function() {
        var txt;
        txt = $("#inVal").val();
        if (txt.length > 0 && (_this.socket != null)) {
          return _this.socket.emit("SetVal", {
            "val": txt
          });
        }
      };
      this.InitSocketIO = function(socket) {
        _this.socket = socket;
        _this.socket.on("connect", function() {
          return _this.connected(true);
        });
        _this.socket.on("disconnect", function() {
          return _this.connected(false);
        });
        return _this.socket.on("DataChanged", function(data) {
          return _this.Display(data.val);
        });
      };
    }

    return ViewModel;

  })();

  $(function() {
    ko.ActiveModel = new ViewModel;
    ko.ActiveModel.InitSocketIO(io.connect("" + document.location.host + ":" + document.location.port));
    return ko.applyBindings(ko.ActiveModel);
  });

}).call(this);
